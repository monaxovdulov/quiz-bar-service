# BarQuiz AI Service üç∏

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –Ω–∞ Python –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –±–∞—Ä–Ω–æ–≥–æ –∫–≤–∏–∑–∞. 
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é LLM (Ollama) –∏ –ø–æ–∏—Å–∫ DuckDuckGo.

## üõ† –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤ (uv)
–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `uv` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ (–±—ã—Å—Ç—Ä–µ–µ –∏ –ø—Ä–æ—â–µ, —á–µ–º pip/poetry).
–ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `uv`:
```bash
# macOS / Linux
curl -LsSf https://astral.sh/uv/install.sh | sh

# Windows (PowerShell)
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Ollama
–°–µ—Ä–≤–∏—Å —Ç—Ä–µ–±—É–µ—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ Ollama.

1. **–°–∫–∞—á–∞–π—Ç–µ Ollama**: [https://ollama.com/download](https://ollama.com/download)
2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
3. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –º–æ–¥–µ–ª—å** (–≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ):
   ```bash
   ollama pull qwen2.5:7b
   ```
   *–≠—Ç–æ —Å–∫–∞—á–∞–µ—Ç –æ–∫–æ–ª–æ 4.7 –ì–ë –¥–∞–Ω–Ω—ã—Ö. –ù—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.*

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É**:
   ```bash
   ollama run qwen2.5:7b "–ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?"
   ```
   –ï—Å–ª–∏ –º–æ–¥–µ–ª—å –æ—Ç–≤–µ—Ç–∏–ª–∞ ‚Äî –≤—Å—ë –≥–æ—Ç–æ–≤–æ. –ù–∞–ø–∏—à–∏—Ç–µ `/bye`, —á—Ç–æ–±—ã –≤—ã–π—Ç–∏.

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**:
   ```bash
   git clone <–≤–∞—à–∞-—Å—Å—ã–ª–∫–∞>
   cd quiz-bar-service
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**:
   –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –µ—Å—Ç—å, –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π):
   ```env
   # .env
   HOST=127.0.0.1
   PORT=8000
   OLLAMA_HOST=http://localhost:11434
   OLLAMA_MODEL=qwen2.5:7b
   FETCH_TIMEOUT=10
   ```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
   ```bash
   uv sync
   ```
4. **–£—Å—Ç–∞–Ω–æ–≤–∏ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç –≤ editable-—Ä–µ–∂–∏–º–µ:**
    ```
    uv pip install -e .
    ```
5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å**:
   ```bash
   uv run python -m barquiz.api
   ```
   *–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ: `Uvicorn running on http://127.0.0.1:8000`*

---

## üîå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤
**–ó–∞–ø—Ä–æ—Å:**
`GET http://127.0.0.1:8000/questions?topic=—Å–º–µ—à–Ω—ã–µ —Ñ–∞–∫—Ç—ã –æ –ø–∏–≤–µ`

**–û—Ç–≤–µ—Ç (JSON):**
```json
{
  "data": [
    {
      "title": "–ü—Ä–∞–≤–¥–∞ –ª–∏, —á—Ç–æ —Å—Ç—Ä–æ–∏—Ç–µ–ª—è–º –ø–∏—Ä–∞–º–∏–¥ –ø–ª–∞—Ç–∏–ª–∏ –ø–∏–≤–æ–º?",
      "value": "–î–∞, –æ–Ω–∏ –ø–æ–ª—É—á–∞–ª–∏ –æ–∫–æ–ª–æ 4 –ª–∏—Ç—Ä–æ–≤ –≤ –¥–µ–Ω—å."
    },
    {
      "title": "–ö–∞–∫–∞—è —Ñ–æ–±–∏—è –æ–∑–Ω–∞—á–∞–µ—Ç —Å—Ç—Ä–∞—Ö –ø—É—Å—Ç—ã—Ö –ø–∏–≤–Ω—ã—Ö –±–æ–∫–∞–ª–æ–≤?",
      "value": "–¶–µ–Ω–æ—Å–∏–ª–ª–∏–∫–∞—Ñ–æ–±–∏—è."
    }
  ]
}
```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger)
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)

### –û—Ç–ª–∞–¥–∫–∞ –ø–æ–∏—Å–∫–∞/—Å–±–æ—Ä–∞ —Ç–µ–∫—Å—Ç–∞
**–ó–∞–ø—Ä–æ—Å:** `GET http://127.0.0.1:8000/debug/search?topic=–±–∞—Ä–Ω—ã–µ —Ñ–∞–∫—Ç—ã`  
**–û—Ç–≤–µ—Ç:** JSON c —Ç–µ–º–æ–π, —Å–ø–∏—Å–∫–æ–º URL, –ø–æ–ª–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º, –¥–ª–∏–Ω–æ–π –∏ –ø—Ä–µ–≤—å—é (–±–µ–∑ –≤—ã–∑–æ–≤–∞ LLM).

---

## üèó –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

* `src/barquiz/api.py` ‚Äî –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (API —Å–µ—Ä–≤–µ—Ä).
* `src/barquiz/core/` ‚Äî –õ–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä).
* `src/barquiz/utils/` ‚Äî –†–∞–±–æ—Ç–∞ —Å —Å–µ—Ç—å—é, –ø–æ–∏—Å–∫–æ–º –∏ Ollama.
* `src/barquiz/config.py` ‚Äî –ù–∞—Å—Ç—Ä–æ–π–∫–∏.
```
